// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/Test.sol";
import {AirdropLevel2} from "../contracts/AirdropLevel2.sol";
import {BaseTest} from "./base/BaseTest.t.sol";

contract AirdropLevel2Test is BaseTest {
  bytes16 public constant APP_ID = 0xf4977993e52606cfd67b7a1cde717069;
  bytes16 public constant GROUP_ID = 0x682544d549b8a461d7fe3e589846bb7b;
  bytes16 public constant GROUP_ID_2 = 0x1cde61966decb8600dfd0749bd371f12;

  AirdropLevel2 public airdropLevel2;

  function setUp() public {
    airdropLevel2 = new AirdropLevel2({name: "My airdropLevel2 contract", symbol: "AIR2", appId: APP_ID, groupId: GROUP_ID, groupId2: GROUP_ID_2});
  }

  function test_AirdropLevel0() public {

    // we register the dev tree root 
    // when we create a proof from an address that is eligible thanks to the devMode configuration
    _registerTreeRoot(0xceeec903f7fb4ad666304f2435ba0d8ff5a3c47083c452908e57a68449979d);

    // Data Vault ownership
    // Group membership of Proof of Humanity (0x682544d549b8a461d7fe3e589846bb7b)
    // signature of address 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
    bytes memory response = hex"0000000000000000000000000000000000000000000000000000000000000020f4977993e52606cfd67b7a1cde71706900000000000000000000000000000000b8e2054f8a912367e38a22ce773328ff000000000000000000000000000000007369736d6f2d636f6e6e6563742d76310000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c068796472612d73322e310000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000004c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000682544d549b8a461d7fe3e589846bb7b000000000000000000000000000000006c617465737400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002c0130bfa21581fcdb63c2ed880f82d24ca0322d524f6b2b7aa9e473a77377a22ba1a2e91418c6ed9718367afce976c2bba73a82dc4deec886a8e71779171f68b162add1bdb539a3479499592d72fefc0ea553fb7491a9972d1b177e329a36e8763249c986f2bedeccc228b48b66554b6b5962de8fee16c2e9bb275df54a7179de00af1e50cc625d9b43e5de59d1cdbb59e2741b76a66ddcbb5c11af88dfb071f3804c65ec44c247937c36e3bd4f5d4d35a5f8d4a8af96fa560cd50dcff135b2b6411535fecd16228346a118453996ee5898fe88062b4292880de431eadbf19a24709d861988e39cf857da5932392f400d0f334052a9ab4ff586e8fffcde7e8b18600000000000000000000000000000000000000000000000000000000000000001c22bb924d4df7679181b00cc5891585ff0b9efac15f0f66d5d498ea4804fb712ab71fb864979b71106135acfa84afc1d756cda74f8f258896f896b4864f025630423b4c502f1cd4179a425723bf1e15c843733af2ecdee9aef6a0451ef2db7400ceeec903f7fb4ad666304f2435ba0d8ff5a3c47083c452908e57a68449979d2595cec01ee5ca3c0353064de37babd3d2bb85ecdff9879b955a3a3221f647cc0f5b6e14789dee71c9d280807776990eb5fafb86dc5578b78e9f53a8c5e7fd670000000000000000000000000000000000000000000000000000000000000001075ca7ef8755640e675db2eb95440ac11bf9a3d480011edd783c14d81ffffffe000000000000000000000000000000000000000000000000000000000000000001b42aaebc220a0702a5ee7e7ccf1a58f85a7b0bfc7e9ebe6de3fc5ab562a23e02c02b0c8903e5f139b466d5bc5ceda4a647c4c72486e6d61de22fc3805abdd000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001a068796472612d73322e310000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000004a00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101b42aaebc220a0702a5ee7e7ccf1a58f85a7b0bfc7e9ebe6de3fc5ab562a23e00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002c011d6081475d2c70c7b6eea69562825c7e4ad05c1dfe673b3655aabb86534ad3005b90ec0c20e9e2564a45beb8ce03b032927e3cce08d424a3ca4c1d82b54a8f628cfafa43d72a41208ba8a9adfbe350a174ef6f54d3257d8923a6368b027012307c5c14fc4554ac196b4c52f804339449cca9d6e62e8973fdc736aa86e0966820c9f59d66e4cde15cf9aaad0d122547d2693a632e81d148e372c2654399a9d330f966b73737b5f7706c68addb74452e16a7500c6723aee4505812987416203322ca261d7bb23b939da26cd04491d0e278291e3de5e3dbcd962463375eda4423e29c231f432f9fc2eaac9cb9a397bb0b2b748d9c20e42c3bb9acb8c38693cfbe300000000000000000000000000000000000000000000000000000000000000001c22bb924d4df7679181b00cc5891585ff0b9efac15f0f66d5d498ea4804fb712ab71fb864979b71106135acfa84afc1d756cda74f8f258896f896b4864f025630423b4c502f1cd4179a425723bf1e15c843733af2ecdee9aef6a0451ef2db7400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001b42aaebc220a0702a5ee7e7ccf1a58f85a7b0bfc7e9ebe6de3fc5ab562a23e02c02b0c8903e5f139b466d5bc5ceda4a647c4c72486e6d61de22fc3805abdd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
    airdropLevel2.claimWithSismoConnect(response, 0x70997970C51812dc3A010C7d01b50e0d17dc79C8);
  }
}
